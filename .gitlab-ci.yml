
# default:
#   image: ubuntu-latest

prepare-job:
  stage: build
#   variables:
#     GIT_CHECKOUT: "true"
  script:
    # - echo "安装依赖"
    - apt update
    - apt install -y python3 python3-pip
    - python3 -m pip install --upgrade pip
    - pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
    - pip3 install bs4 urllib3 lxml selenium requests qrcode
    - if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    # - echo "安装其他软件"
    - apt update
    - DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends tzdata
    - apt install -y firefox firefox-geckodriver net-tools

config-job1:
  stage: test
  script:
    - echo "$env.b_cookie" > config/cookie.txt
    - mkdir config/s_headless
    - python3 checkCookie.py
    
run-prod:
  stage: deploy
  script:
    - python3 main.py

